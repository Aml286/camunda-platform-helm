[![Community Extension](https://img.shields.io/badge/Community%20Extension-An%20open%20source%20community%20maintained%20project-FF4700)](https://github.com/camunda-community-hub/community)[![Lifecycle: Incubating](https://img.shields.io/badge/Lifecycle-Incubating-blue)](https://github.com/Camunda-Community-Hub/community/blob/main/extension-lifecycle.md#incubating-)[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)[![Artifact Hub](https://img.shields.io/endpoint?url=https://artifacthub.io/badge/repository/camunda-cloud-helm)](https://artifacthub.io/packages/search?repo=camunda-cloud-helm)


# Camunda Cloud Helm

The Camunda Cloud Helm repo, contains and host Camunda Cloud related helm charts.

The charts can be accessed by adding the following Helm repo to your Helm setup:

```sh
helm repo add camunda-cloud https://helm.camunda.io
helm repo update
```

The charts are represented in the following image:
![HELM CHARTS](imgs/HelmChartImage.png)


## Installing Charts

You can install the Helm Charts by running:

```sh
helm install <YOUR HELM RELEASE NAME> camunda-cloud/ccsm-helm
```

Per default the following will be installed:

- [ccsm-helm](charts/ccsm-helm)
  - Zeebe
  - Zeebe Gateway
  - Operate
  - Tasklist
  - [ElasticSearch](https://github.com/elastic/helm-charts/tree/master/elasticsearch)

Follow [the instructions in the Camunda Cloud documentation](https://docs.zeebe.io/kubernetes/installing-helm.html) to install Camunda Cloud to a K8s cluster.

**Note check the [kind/ccsm-kind-values](kind/ccsm-kind-values) file to get ccsm-helm running with kind*


## Configure Charts

Helm charts can be configured via using extra values files or directly via the `--set` option. make sure to check out the [CCSM-HELM Readme](https://github.com/camunda-community-hub/camunda-cloud-helm/blob/main/charts/ccsm-helm/README.md) for more information.

Example to enable the prometheus servicemonitor for Zeebe:

```sh
helm install <YOUR HELM RELEASE NAME> camunda-cloud/ccsm-helm --set zeebe.prometheusServiceMonitor.enabled=true
```

## Uninstalling Charts

You can remove these charts by running:

```
helm uninstall <YOUR HELM RELEASE NAME>
```

> Notice that all the services and pods will be deleted, but not the Persistence Volume Claims which are used to hold the storage for the data generated by the cluster and Elasticsearch. In order to free up the storage you need to manually delete all the Persistent Volume Claims. You can do this by running:

```
kubectl get pvc
```

Then delete the ones that you don't want to keep:

```
kubectl delete pvc <PVC ids here>
```

Or delete the related kubernetes namespace, which contains the resources.

## Issues

Please create [new issues](https://github.com/camunda-community-hub/camunda-cloud-helm) if you find problems with these charts. This repository is hosted using GitHub Pages and the source code repository can be found here: [https://github.com/camunda-community-hub/camunda-cloud-helm](https://github.com/camunda-community-hub/camunda-cloud-helm)

## Releasing the Charts

The charts are build and linted on every push to the main branch. If the chart version changes a new github release with the corresponding packaged helm chart is created. The charts are hosted via github pages and use the release artifacts. We use the [chart-releaser-action](https://github.com/helm/chart-releaser-action) to release the charts.
